<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>pandoc-zotxt.lua</h1>




<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/README.md.html">README</a></li>
  <li><strong>pandoc-zotxt</strong></li>
</ul>
<h2>Scripts</h2>
<ul class="nowrap">
  <li><a href="../index.html">pandoc-zotxt.lua</a></li>
</ul>

</div>

<div id="content">


<hr/>
<p>title: PANDOC-ZOTXT.LUA
author: Odin Kroeger</p>
<h2>section: 1</h2>

<h1>NAME</h1>

<p><strong>pandoc-zotxt.lua</strong> - Look up sources of citations in Zotero</p>


<h1>SYNOPSIS</h1>

<p><strong>pandoc</strong> <strong>-L</strong> <em>pandoc-zotxt.lua</em> <strong>-C</strong></p>


<h1>DESCRIPTION</h1>

<p><strong>pandoc-zotxt.lua</strong> looks up sources of citations in Zotero and adds them
either to a document's "references" metadata field or to a bibliography file,
where Pandoc can pick them up.</p>

<p>Cite your sources using "easy citekeys" (provided by <em>zotxt</em>) or "Better BibTeX
Citation Keys" (provided by Better BibTeX for Zotero). Then tell <strong>pandoc</strong> to
filter your document through <strong>pandoc-zotxt.lua</strong> before processing citations.
Zotero must be running, of course. That's all there is to it.</p>

<p><strong>pandoc-zotxt.lua</strong> only queries Zotero for sources that are neither defined
in the "references" metadata field nor in any bibliography file.</p>


<h1>BIBLIOGRAPHY FILES</h1>

<p>If you set the "zotero-bibliography" metadata field to a filename, then
<strong>pandoc-zotxt.lua</strong> adds sources to that file, rather than to the
"references" metadata field; it also adds the path of that file to the
document's "bibliography" metadata field, so that Pandoc picks up the
bibliographic data of those sources. This speeds up subsequent processing
of the same document, because <strong>pandoc-zotxt.lua</strong> will only fetch those
sources from Zotero that are not yet in that file. </p>

<p>The biblography is stored in JSON, so the bibliography file's name
must end with ".json".</p>

<p><strong>pandoc-zotxt.lua</strong> interprets relative filenames as relative to the
directory of the first input file that you pass to <strong>pandoc</strong> or, if you
do not pass any input file, as relative to the current working directory.
You may want to use a single bibliography file for all of your documents.
This may change; future version may use <strong>--resource-path</strong> instead.</p>

<p>You can safely set "zotero-bibliography" and "bibliography" at the same time.</p>

<p><strong>pandoc-zotxt.lua</strong> only ever adds sources to the bibliography file.
It doesn't update or delete them. If you want to update the sources in your
bibliography file, delete it. <strong>pandoc-zotxt.lua</strong> will then regenerate
it from scratch.</p>


<h1>EXAMPLE</h1>


<pre>
pandoc -L pandoc-zotxt.lua -C &lt;&lt;EOF
See @doe2020Title <span class="keyword">for</span> details.
EOF
</pre>


<p>This will look up "doe2020Title" in Zotero before Pandoc processes citations.</p>


<h1>KNOWN ISSUES</h1>

<p>Zotero, from v5.0.71 onwards, does not allow browsers to access its interface.
It defines "browser" as any user agent that sets the "User Agent" HTTP header
to a string that starts with "Mozilla/". However, Zotero v5.0.71 and v5.0.72
fail to handle HTTP requests from user agents that do not set the "User Agent"
HTTP header. And <strong>pandoc</strong> does not. As a consequence, <strong>pandoc-zotxt.lua</strong>
cannot retrieve data from these versions of Zotero unless you tell <strong>pandoc</strong>
to set that header. This issue has been fixed in more recent versions of Zotero.</p>


<h1>CAVEATS</h1>

<p><strong>pandoc-zotxt.lua</strong> is Unicode-agnostic.</p>

<p>Pandoc from v2.11 onwards only supports BibTeX/BibLaTeX, CSL JSON, and
CSL YAML bibliography files. <strong>pandoc-zotxt.lua</strong> can only parse
bibliography files in those formats.</p>


<h1>SEE ALSO</h1>

<ul>
    <li><a href="https://github.com/egh/zotxt">zotxt</a></li>
    <li><a href="https://retorque.re/zotero-better-bibtex/">Better BibTeX</a></li>
</ul>

<p>pandoc(1)</p>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2021-05-11 22:17:57 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
