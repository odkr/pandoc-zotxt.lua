.\" Automatically generated by Pandoc 2.13
.\"
.TH "pandoc-zotxt.lua" "1" "May 15, 2021" "" ""
.hy
.SH NAME
.PP
\f[B]pandoc-zotxt.lua\f[R] - Look up sources of citations in Zotero
.SH SYNOPSIS
.PP
\f[B]pandoc\f[R] \f[B]-L\f[R] \f[I]pandoc-zotxt.lua\f[R] \f[B]-C\f[R]
.SH DESCRIPTION
.PP
\f[B]pandoc-zotxt.lua\f[R] looks up sources of citations in Zotero and
adds them either to a document\[aq]s \[dq]references\[dq] metadata field
or to a bibliography file, where Pandoc can pick them up.
.PP
You cite your sources using \[dq]easy citekeys\[dq] (provided by
\f[I]zotxt\f[R]) or \[dq]Better BibTeX Citation Keys\[dq] (provided by
Better BibTeX for Zotero).
You then then tell \f[B]pandoc\f[R] to filter your document through
\f[B]pandoc-zotxt.lua\f[R] before processing citations (Zotero must be
running).
That\[aq]s all there is to it.
.PP
\f[B]pandoc-zotxt.lua\f[R] only looks up sources that are defined
neither in the \[dq]references\[dq] metadata field nor in any
bibliography file.
.SH BIBLIOGRAPHY FILES
.PP
If you set the \[dq]zotero-bibliography\[dq] metadata field to a
filename, then \f[B]pandoc-zotxt.lua\f[R] adds sources to that file,
rather than to the \[dq]references\[dq] metadata field.
It also adds the path of that file to the document\[aq]s
\[dq]bibliography\[dq] metadata field, so that Pandoc picks up the
bibliographic data of those sources (you can safely set
\[dq]zotero-bibliography\[dq] and \[dq]bibliography\[dq] at the same
time).
This speeds up subsequent processing of the same document, because
\f[B]pandoc-zotxt.lua\f[R] will only fetch those sources from Zotero
that are not yet in that file.
.PP
The biblography is stored as a CSL JSON file, so the bibliography
file\[aq]s name must end with \[dq].json\[dq].
.PP
\f[B]pandoc-zotxt.lua\f[R] interprets relative filenames as relative to
the directory of the first input file that you pass to \f[B]pandoc\f[R]
or, if you do not pass any input file, as relative to the current
working directory.
.PP
\f[B]pandoc-zotxt.lua\f[R] only ever adds sources to its bibliography
file.
It does \f[I]not\f[R] update or delete them.
If you want to update the sources in your bibliography file, delete it.
\f[B]pandoc-zotxt.lua\f[R] will then regenerate it from scratch.
.SH EXAMPLE
.IP
.nf
\f[C]
pandoc -L pandoc-zotxt.lua -C <<EOF
See \[at]doe2020Title for details.
EOF
\f[R]
.fi
.PP
This will look up \[dq]doe2020Title\[dq] in Zotero.
.SH KNOWN ISSUES
.PP
Zotero v5.0.71 and v5.0.72 fail to handle HTTP requests from user agents
that do not set the \[dq]User Agent\[dq] HTTP header.
And \f[B]pandoc\f[R] does not.
As a consequence, \f[B]pandoc-zotxt.lua\f[R] cannot retrieve data from
these versions of Zotero unless you tell \f[B]pandoc\f[R] to set that
header.
.SH CAVEATS
.PP
\f[B]pandoc-zotxt.lua\f[R] is Unicode-agnostic.
.SH SEE ALSO
.IP \[bu] 2
zotxt (https://github.com/egh/zotxt)
.IP \[bu] 2
Better BibTeX (https://retorque.re/zotero-better-bibtex/)
.PP
pandoc(1)
.SH AUTHORS
Odin Kroeger.
