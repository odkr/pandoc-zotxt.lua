'\" t
.\" Automatically generated by Pandoc 2.13
.\"
.TH "pandoc-zotxt.lua" "1" "May 31, 2021" "" ""
.hy
.SH NAME
.PP
\f[B]pandoc-zotxt.lua\f[R] - Look up sources of citations in Zotero
.SH SYNOPSIS
.PP
\f[B]pandoc\f[R] \f[B]-L\f[R] \f[I]pandoc-zotxt.lua\f[R] \f[B]-C\f[R]
.SH DESCRIPTION
.PP
\f[B]pandoc-zotxt.lua\f[R] looks up sources of citations in Zotero and
adds them either to a document\[aq]s \[dq]references\[dq] metadata field
or to a bibliography file, where Pandoc can pick them up.
.PP
Cite your sources using \[dq]easy citekeys\[dq] (provided by
\f[I]zotxt\f[R]) or \[dq]Better BibTeX Citation Keys\[dq] (provided by
Better BibTeX for Zotero).
Then tell \f[B]pandoc\f[R] to filter your document through
\f[B]pandoc-zotxt.lua\f[R] before processing citations.
That\[aq]s all there is to it.
Zotero bust be running, of course.
.PP
\f[B]pandoc-zotxt.lua\f[R] only fetches sources from Zotero that are
defined neither in the \[dq]references\[dq] metadata field nor in any
bibliography file.
.SH BIBLIOGRAPHY FILES
.PP
\f[B]pandoc-zotxt.lua\f[R] can add sources to a special bibliography
file, rather than to the \[dq]references\[dq] metadata field.
This speeds up subsequent processing of the same document, because
sources that are already in that file need not be fetched from Zotero
again.
.PP
You configure \f[B]pandoc-zotxt.lua\f[R] to add sources to a
bibliography file by setting the \[dq]zotero-bibliography\[dq] metadata
field to a filename.
If the filename is relative, it is interpreted as relative to the
directory of the first input file passed to \f[B]pandoc\f[R] or, if no
input file was given, as relative to the current working directory.
The format of the file is determined by its filename ending:
.PP
.TS
tab(@);
l l l.
T{
\f[B]Ending\f[R]
T}@T{
\f[B]Format\f[R]
T}@T{
\f[B]Feature\f[R]
T}
_
T{
\f[C].json\f[R]
T}@T{
CSL JSON
T}@T{
More robust.
T}
T{
\f[C].yaml\f[R]
T}@T{
CSL YAML
T}@T{
Easier to edit manually.
T}
.TE
.PP
The bibliography file is added to the \[dq]bibliography\[dq] metadata
field automatically.
You can safely set \[dq]zotero-bibliography\[dq] and
\[dq]bibliography\[dq] at the same time.
.PP
The sources in the bibliography file are neither updated nor deleted.
If you want to update the file, delete it.
.SH EXAMPLE
.IP
.nf
\f[C]
pandoc -L pandoc-zotxt.lua -C <<EOF
See \[at]doe2020Title for details.
EOF
\f[R]
.fi
.PP
This will look up \[dq]doe2020Title\[dq] in Zotero.
.SH KNOWN ISSUES
.PP
Zotero v5.0.71 and v5.0.72 fail to handle HTTP requests from user agents
that do not set the \[dq]User Agent\[dq] HTTP header.
And \f[B]pandoc\f[R] does not.
As a consequence, \f[B]pandoc-zotxt.lua\f[R] cannot retrieve data from
these versions of Zotero unless you tell \f[B]pandoc\f[R] to set that
header.
.SH CAVEATS
.PP
\f[B]pandoc-zotxt.lua\f[R] is Unicode-agnostic.
.SH SEE ALSO
.IP \[bu] 2
zotxt (https://github.com/egh/zotxt)
.IP \[bu] 2
Better BibTeX (https://retorque.re/zotero-better-bibtex/)
.PP
pandoc(1)
.SH AUTHORS
Odin Kroeger.
